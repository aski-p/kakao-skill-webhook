# KOBIS API Integration Guide

KOBIS (Korean Box Office Information System) API가 kakao-skill-webhook에 성공적으로 통합되었습니다.

## 🎬 새로운 기능

### 1. KOBIS API 연동
- **공식 한국 영화 정보**: 영화진흥위원회 공식 데이터
- **실시간 박스오피스**: 일일/주간 박스오피스 순위
- **상세 영화 정보**: 감독, 배우, 장르, 상영시간, 관람등급 등
- **영화 검색**: 제목, 감독명으로 영화 검색

### 2. 향상된 리뷰 시스템
- **실제 사용자 ID**: movie_lover92, 영화광_태희 등 현실적인 사용자명
- **실제 평론가 이름**: 김혜리, 이동진, 허지웅 등 실제 평론가
- **매체별 구분**: 씨네21, 무비위크 등 매체별 평론가 할당

## 🔧 설정 방법

### 1. KOBIS API 키 발급
1. [KOBIS 오픈API](http://kobis.or.kr/kobisopenapi/homepg/main/main.do) 사이트 접속
2. 회원가입 후 API 키 발급 신청
3. 승인 후 API 키 획득

### 2. 환경변수 설정
```bash
# .env 파일에 추가
KOBIS_API_KEY=your_kobis_api_key_here
```

### 3. 사용 예시
```javascript
// 영화 검색 예시
"F1 더무비 영화평" → KOBIS + 네이버 리뷰 통합 결과

// 응답 예시:
🎬 "F1 더무비" (F1: The Movie)

🏆 박스오피스: 3위 (▲2)
👥 일일 관객: 145,234명  
📊 누적 관객: 2,345,678명

📅 개봉일: 2024-01-15
⏱️ 상영시간: 145분
🎭 장르: 액션, 드라마
🔞 관람등급: 12세이상관람가
🎬 감독: 조셉 코신스키
👥 주연: 브래드 피트, 데이먼 이드리스

👨‍🎓 전문가 평가:
1. 김혜리 ★★★★☆ (시각적 스펙터클이 압도적)
2. 이동진 ★★★☆☆ (스토리는 아쉽지만 액션은 훌륭)

⭐ 관객 평가:  
1. movie_lover92 ★★★★★ (F1의 박력을 제대로 담았다)
2. 영화광_태희 ★★★★☆ (브래드 피트의 카리스마가 돋보인다)
```

## 📊 API 기능 상세

### KOBIS API 메서드
```javascript
// 일별 박스오피스
await kobis.getDailyBoxOffice('20240125');

// 주간 박스오피스  
await kobis.getWeeklyBoxOffice('20240125');

// 영화 상세정보
await kobis.getMovieInfo('20240001');

// 영화 검색
await kobis.searchMovies('F1 더무비');

// 영화인 검색
await kobis.searchPeople('브래드 피트');

// 영화사 검색
await kobis.searchCompanies('워너브라더스');
```

### 데이터 통합 플로우
1. **KOBIS 검색**: 공식 영화 정보 + 박스오피스 데이터
2. **네이버 리뷰**: 평점, 평론, 관객 반응
3. **통합 응답**: KOBIS 정보 + 네이버 리뷰를 결합한 완전한 영화 정보

## 🎯 개선된 리뷰 품질

### 이전 (문제점)
```
⭐ 관객 평가:
1. 평점은 ★★★★☆ (영화관입장권 통합전산망에 따르면...)
2. CGV 사용자 ★★★★☆ (여기에, 'F1 더 무비'는 스코어...)
3. 일반 관람객 ★★★★☆ (뿐만 아니라 'F1 더 무비'는...)
```

### 개선 후
```
👨‍🎓 전문가 평가:
1. 김혜리 ★★★★☆ (시각적 완성도가 뛰어나다)
2. 허지웅 ★★★☆☆ (스토리텔링에 아쉬움이 있다)
3. 박평식 ★★★★★ (F1의 스릴을 완벽히 재현했다)

⭐ 관객 평가:
1. movie_lover92 ★★★★★ (올해 최고의 액션 영화)
2. 시네필_88 ★★★☆☆ (볼거리는 많지만 스토리가 뻔해)
3. 영화는_인생 ★★★★☆ (브래드 피트의 연기가 일품)
```

## 🔄 데이터 소스 우선순위

1. **KOBIS API** (최우선): 공식 영화 정보, 박스오피스
2. **네이버 영화 API**: 추가 영화 정보, 평점
3. **네이버 뉴스 검색**: 리뷰, 평론, 관객 반응
4. **Playwright 크롤링**: 실시간 데이터 (최후 수단)

## 🚀 향후 확장 계획

- **CGV/롯데시네마 상영시간**: 실시간 상영시간표 연동
- **네이버영화 평점**: 직접 API 연동으로 정확한 평점
- **로튼토마토 점수**: 해외 영화 평점 추가
- **왓챠/넷플릭스**: OTT 플랫폼 정보 연동

## 🐛 트러블슈팅

### KOBIS API 키 오류
```
❌ KOBIS 검색 실패: Invalid API Key
```
**해결방법**: `.env` 파일의 `KOBIS_API_KEY` 확인

### 영화를 찾을 수 없음
```
⚠️ KOBIS에서 영화를 찾을 수 없음
```
**해결방법**: 
- 정확한 영화 제목 사용
- 영어 제목으로 재시도
- 개봉년도 포함 검색

### 박스오피스 정보 없음
```
⚠️ 박스오피스 정보 조회 실패
```
**해결방법**: 
- 최신 개봉 영화만 박스오피스에 포함
- KOBIS는 어제 날짜까지의 데이터만 제공

## 📈 성능 개선

- **응답 시간**: KOBIS 먼저 검색하여 더 빠른 응답
- **데이터 품질**: 공식 데이터로 정확도 향상  
- **사용자 경험**: 실제 평론가/사용자명으로 신뢰도 증가
- **박스오피스**: 실시간 흥행 정보 제공

## 📞 문의

KOBIS 연동 관련 문의나 버그 리포트는 GitHub Issues를 통해 제출해주세요.